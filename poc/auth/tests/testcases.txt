// This file contains several test cases based on the CLI utility curl. These tests are intended to be executed manually

/**** Basic API test cases ****/

// assert success
curl --header "Content-Type: application/json" --request GET localhost:8888/api/v1

/**** Registration test cases ****/
// assert fail (missing confirm-password)
curl --header "Content-Type: application/json" --request POST --data '{"email": "richardfmemory@gmail.com", "username": "rmemory", "firstName": "Richard", "lastName": "Memory", "password":"foobar"}' localhost:8888/api/v1/register

// assert fail (incorrect confirm-password)
curl --header "Content-Type: application/json" --request POST --data '{"email": "richardfmemory@gmail.com", "username": "rmemory", "firstName": "Richard", "lastName": "Memory", "password":"foobar", "password_confirm":"barfoo"}' localhost:8888/api/v1/register

// assert success (number1)
curl --header "Content-Type: application/json" --request POST --data '{"email": "number1@gmail.com", "username": "number1", "firstName": "Number", "lastName": "One", "password":"foobar", "password_confirm":"foobar", "roles":["member"], "demographics":{"name":"Number One", "gender":"female"}}' localhost:8888/api/v1/register


// assert success (john)
curl --header "Content-Type: application/json" --request POST --data '{"email": "johndoe@gmail.com", "username": "john", "firstName": "John", "lastName": "Doe", "password":"foobar", "password_confirm":"foobar", "roles":["member"], "demographics":{"name":"John Doe", "gender":"male"}}' localhost:8888/api/v1/register

// assert fail (duplicate of John )
curl --header "Content-Type: application/json" --request POST --data '{"email": "johndoe@gmail.com", "username": "john", "firstName": "John", "lastName": "Doe", "password":"foobar", "password_confirm":"foobar", "roles":["member"], "demographics":{"name":"John Doe", "gender":"male"}}' localhost:8888/api/v1/register

// assert success (jane)
curl --header "Content-Type: application/json" --request POST --data '{"email": "janedoe@gmail.com", "username": "jane", "firstName": "Jane", "lastName": "Doe", "password":"foobar", "password_confirm":"foobar", "roles":["member", "admin"], "demographics":{"name":"Jane Doe", "gender":"female"}}' localhost:8888/api/v1/register

/**** Login test cases ****/
// assert fail (wrong password)
curl --header "Content-Type: application/json" --request POST --cookie-jar ~/mycookie --data '{"username": "rmemory", "password": "wrongpassword"}' localhost:8888/api/v1/login

// assert success
curl --header "Content-Type: application/json" --request POST --cookie-jar ~/mycookie --data '{"username": "rmemory", "password": "foobar"}' localhost:8888/api/v1/login

// assert success
curl --header "Content-Type: application/json" --request POST --cookie-jar ~/mycookie --data '{"username": "jane", "password": "foobar"}' localhost:8888/api/v1/login

// assert success
curl --header "Content-Type: application/json" --request POST --cookie-jar ~/mycookie --data '{"username": "john", "password": "foobar"}' localhost:8888/api/v1/login

/*** password reset flow ***/

// assert fail
curl --header "Content-Type: application/json" --request POST --data '{"username": "wrongusername"}' localhost:8888/api/v1/requestreset

// assert success
curl --header "Content-Type: application/json" --request POST --data '{"username": "jane"}' localhost:8888/api/v1/requestreset

curl --header "Content-Type: application/json" --request POST --data '{"password":"brandnewpassword", "password_confirm":"brandnewpassword"}' localhost:8888/api/v1/reset?resetToken=ed1b350a4670f6e60c82efff3bd6ddf4b21ab0a0

/*** isloggedin ***/
//assert success
curl -i --header "Content-Type: application/json" --request GET --cookie ~/mycookie localhost:8888/api/v1/logout
curl -i --header "Content-Type: application/json" --request GET --cookie ~/mycookie localhost:8888/api/v1/isloggedin

//assert fail
curl --header "Content-Type: application/json" --request GET localhost:8888/api/v1/isloggedin

//assert success (with proper token)
curl --header "Content-Type: application/json" --request GET --cookie-jar ~/mycookie --cookie ~/mycookie --data '{"token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1YzAwMzhmMGFlMzBjZjVmN2VkNWY5MTIiLCJ0b2tlblRpbWVvdXQiOjE1NzUwNTQ2MDE1NzMsImlhdCI6MTU0MzUxODYwMX0.etIsedrNrHQz0ZxwCwn79lgf_fyG2V1Xf9sND0CTQ-o"}' localhost:8888/api/v1/isloggedin


/* get user demographics */
// assert fail (missing cookie and token)
curl --header "Content-Type: application/json" --request GET localhost:8888/api/v1/user/rmemory

// assert fail (username doesn't exist, but if proper permissions exist should provide feedback)
curl --header "Content-Type: application/json" --request GET --cookie ~/mycookie localhost:8888/api/v1/user/wronguser


// assert success (no cookie; paste token received from login)
curl --header "Content-Type: application/json" --request GET --cookie ~/mycookie localhost:8888/api/v1/user/rmemory

// assert success-ish
curl --header "Content-Type: application/json" --request POST --cookie-jar ~/mycookie --cookie ~/mycookie --data '{"username": "jane", "password": "foobar"}' localhost:8888/api/v1/login
curl --header "Content-Type: application/json" --request GET --cookie ~/mycookie localhost:8888/api/v1/login localhost:8888/api/v1/user/rmemory
curl --header "Content-Type: application/json" --request GET --cookie ~/mycookie localhost:8888/api/v1/login localhost:8888/api/v1/user/jane
curl --header "Content-Type: application/json" --request GET --cookie ~/mycookie localhost:8888/api/v1/user/wronguser

curl --header "Content-Type: application/json" --request GET --cookie ~/mycookie localhost:8888/api/v1/users


curl --header "Content-Type: application/json" --request POST --cookie-jar ~/mycookie --cookie ~/mycookie --data '{"username": "rmemory", "password":"mmrmrrrogers"}' localhost:8888/api/v1/login

curl --header "Content-Type: application/json" --request GET --cookie-jar ~/mycookie --cookie ~/mycookie localhost:8888/api/v1/isloggedin

curl --header "Content-Type: application/json" --request DELETE --cookie-jar ~/mycookie --cookie ~/mycookie localhost:8888/api/v1/logout

curl --header "Content-Type: application/json" --request GET --cookie-jar ~/mycookie --cookie ~/mycookie localhost:8888/api/v1/isloggedin







